@model ITIExaminationSystemMVC.Models.InstructorDashboardViewModel

@{
    ViewData["Title"] = "Instructor Dashboard";
}

<link rel="stylesheet" href="~/css/dashboard.css" />

<div class="dashboard-container animate-fade-in">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="d-flex justify-content-between align-items-center">
            <div>
                <h1>Hello, @Model.Instructor?.Name!</h1>
                <p>Welcome to your instructor dashboard.</p>
            </div>
            <div>
                <a asp-action="AddStudent" class="btn btn-light text-primary fw-bold px-4 py-2 rounded-pill shadow-sm">
                    <i class="bi bi-person-plus-fill me-2"></i>Add Student
                </a>
            </div>
        </div>
    </div>

    @if (ViewBag.Message != null)
    {
        <div class="alert alert-warning">@ViewBag.Message</div>
    }

    <div class="dashboard-grid">
        <!-- Quick Stats -->
        <div class="card">
            <h5 class="card-title">My Profile</h5>
            <div class="d-flex align-items-center mb-3">
                <div class="rounded-circle bg-primary bg-opacity-10 p-3 me-3 text-primary">
                    <i class="bi bi-person-badge fs-3"></i>
                </div>
                <div>
                    <h6 class="mb-0 text-muted">Degree</h6>
                    <span class="fw-bold">@Model.Instructor?.Degree</span>
                </div>
            </div>
             <div class="d-flex align-items-center">
                <div class="rounded-circle bg-success bg-opacity-10 p-3 me-3 text-success">
                    <i class="bi bi-telephone fs-3"></i>
                </div>
                <div>
                    <h6 class="mb-0 text-muted">Phone</h6>
                    <span class="fw-bold">@Model.Instructor?.Phone</span>
                </div>
            </div>
        </div>
        
        <!-- Branches -->
        <div class="card">
            <h5 class="card-title">Assigned Branches <span class="badge bg-primary rounded-pill float-end">@Model.Branches.Count</span></h5>
            
            @if(Model.Branches.Any())
            {
                <ul class="list-group list-group-flush">
                    @foreach(var branch in Model.Branches)
                    {
                        <li class="list-group-item bg-transparent">
                            <i class="bi bi-geo-alt-fill text-danger me-2"></i> @branch.Name - <span class="text-muted small">@branch.Location</span>
                        </li>
                    }
                </ul>
            }
            else
            {
                <p class="text-muted text-center py-4">No branches assigned yet.</p>
            }
        </div>

        <!-- Courses -->
        <div class="card" style="grid-column: span 1 / -1; @((Model.Courses.Count > 0) ? "grid-column: span 2;" : "")">
             <h5 class="card-title">My Courses <span class="badge bg-success rounded-pill float-end">@Model.Courses.Count</span></h5>
             @if(Model.Courses.Any())
             {
                 <div class="table-responsive">
                     <table class="table table-hover align-middle">
                         <thead class="table-light">
                             <tr>
                                 <th>Course Name</th>
                                 <th>Total Degree</th>
                                 <th>Actions</th>
                             </tr>
                         </thead>
                         <tbody>
                             @foreach(var course in Model.Courses)
                             {
                                 <tr>
                                     <td class="fw-bold">@course.Name</td>
                                     <td>@course.TotDegree</td>
                                     <td>
                                         <a asp-action="AssignExam" asp-route-courseId="@course.Id" class="btn btn-sm btn-outline-primary">Assign Exam</a>
                                     </td>
                                 </tr>
                             }
                         </tbody>
                     </table>
                 </div>
             }
             else
             {
                 <p class="text-muted text-center py-4">No courses assigned yet.</p>
             }
        </div>
        
        <!-- Actions Card -->
        <div class="card mt-3" style="grid-column: span 1 / -1;">
            <div class="card-body d-flex gap-3 justify-content-center">
                 <a asp-action="AssignStudentToCourse" class="btn btn-outline-dark">
                    <i class="bi bi-person-check-fill me-2"></i>Assign Existing Student to Course
                 </a>
            </div>
        </div>
                     </table>
                 </div>
             }
             else
             {
                 <p class="text-muted text-center py-4">No courses assigned yet.</p>
             }
        </div>
    </div>
</div>
